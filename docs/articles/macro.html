<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>macro • macro</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><script src="../extra.js"></script><meta property="og:title" content="macro">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">macro</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"></ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="../articles/macro.html">Get started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/macro-language.html">Macro Language</a>
    </li>
    <li>
      <a href="../articles/macro-debug.html">Debugging</a>
    </li>
    <li>
      <a href="../articles/macro-example1.html">Example 1: Listing</a>
    </li>
    <li>
      <a href="../articles/macro-example2.html">Example 2: Another Listing</a>
    </li>
    <li>
      <a href="../articles/macro-example3.html">Example 3: Table</a>
    </li>
    <li>
      <a href="../articles/macro-disclaimer.html">Disclaimer</a>
    </li>
    <li>
      <a href="../articles/macro-faq.html">Frequently Asked Questions</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href=".././articles/macro-faq.html">FAQ</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
<li>
  <a href="https://github.com/dbosak01/macro/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>macro</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/dbosak01/macro/blob/HEAD/vignettes/macro.Rmd" class="external-link"><code>vignettes/macro.Rmd</code></a></small>
      <div class="hidden name"><code>macro.Rmd</code></div>

    </div>

    
    
<p>The <strong>macro</strong> package provides macro commands and a
pre-processor for R programs. The package can be useful in several ways.
Before illustrating the functionality, let’s first discuss the macro
concept at a high level.</p>
<div class="section level2">
<h2 id="macro-concept">Macro Concept<a class="anchor" aria-label="anchor" href="#macro-concept"></a>
</h2>
<p>A macro language is like a meta-language for code. The meta-language
runs first, generates the regular code, and then the regular code is
executed to produce some sort of output. It is, at heart, a text
manipulation system.</p>
<p>The SAS® macro language is commonly used in SAS programs. The R
<strong>macro</strong> package was inspired by SAS. Specifically, the
<strong>macro</strong> package aims to replicate SAS macro with “mprint”
and “mfile” options turned on. These options generate a resolved code
file.</p>
</div>
<div class="section level2">
<h2 id="an-r-macro-language">An R Macro Language<a class="anchor" aria-label="anchor" href="#an-r-macro-language"></a>
</h2>
<p>Clearly, a macro language for R will not be the same as the SAS macro
language. The SAS macro language is built into the SAS execution
environment. The SAS pre-processor is run automatically, and the macro
syntax is understood by the SAS syntax checker.</p>
<p>With R, none of the above applies. R does not have a built-in macro
language, does not have a built-in pre-processor, and the R syntax
checker will not expect any sort of macro language syntax.</p>
<p>Therefore, to build macro-like functionality in R, we must get a
little creative.</p>
</div>
<div class="section level2">
<h2 id="macro-statements">Macro Statements<a class="anchor" aria-label="anchor" href="#macro-statements"></a>
</h2>
<p>The first thing to note is that macro statements in the
<strong>macro</strong> package are written as code comments. The
comments ensure that the R syntax checker will not generate an error
when parsing the macro functions.</p>
<p>In SAS, macro functions are prefixed with a percent sign (%). In R,
macro statements are therefore prefixed with a comment symbol (#) and a
percent sign (%). A simple macro assignment looks like this:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#%let x &lt;- 1</span></span></code></pre></div>
<p>A simple macro conditional looks like this:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#%if (&amp;x == 1)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"x is one!"</span><span class="op">)</span></span>
<span><span class="co">#%else</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"x is something else!"</span><span class="op">)</span></span>
<span><span class="co">#%end</span></span></code></pre></div>
<p>Note that the above R macro syntax is not identical to the SAS
syntax. The syntax devised for the <strong>macro</strong> package is a
blend of SAS and R syntax.</p>
</div>
<div class="section level2">
<h2 id="differences-between-sas-macro-and-r-macro">Differences Between SAS Macro and R Macro<a class="anchor" aria-label="anchor" href="#differences-between-sas-macro-and-r-macro"></a>
</h2>
<p>Here are some of the major difference between the SAS macro language
and the R macro language:</p>
<ul>
<li>R macro statements do not end with a semicolon (“;”). They are
single-line commands, and end with a carriage return.</li>
<li>R macro commands can be used anywhere in the program. They are not
restricted to use inside macro functions.<br>
</li>
<li>Single-quotes will not prevent macro variable resolution. In the R
macro language, single and double quotes operate the same.</li>
<li>All operators in the R macro language use R syntax, including the
comparison operator (“==”).</li>
<li>R macro variables in open code must be surrounded by backticks (“`”)
to avoid errors. Inside comments and other macro commands, they do not
need backticks.</li>
</ul>
</div>
<div class="section level2">
<h2 id="the-msource-function">The msource() function<a class="anchor" aria-label="anchor" href="#the-msource-function"></a>
</h2>
<p>In the <strong>macro</strong> package, pre-processing of the macro
code is accomplished by a special function: <code><a href="../reference/msource.html">msource()</a></code>. The
<code><a href="../reference/msource.html">msource()</a></code> function is similar to the <code><a href="https://rdrr.io/r/base/source.html" class="external-link">source()</a></code>
function in R. The <code><a href="../reference/msource.html">msource()</a></code> function will execute your
code, just like the <code><a href="https://rdrr.io/r/base/source.html" class="external-link">source()</a></code> function. First, however, it
will execute the <strong>macro</strong> pre-processor.</p>
<p>The steps can be summarized as follows:</p>
<p>Step 1: Pre-process the code and resolve all macro language
syntax.<br>
Step 2: Generate a new code file with the resolved code.<br>
Step 3: Execute the resolved code with the <code><a href="https://rdrr.io/r/base/source.html" class="external-link">source()</a></code>
function.</p>
<p>Notice that the above steps map directly to the way the SAS macro
processor works.</p>
<p>In addition, the R macro language is a text-replacement language,
just like SAS. Macro variables are swapped out with real values as text
replacements. Macro conditions are evaluated, and only the code in the
TRUE macro conditions is executed.</p>
<p>All of the above is handled by the <code><a href="../reference/msource.html">msource()</a></code> function.
<code><a href="../reference/msource.html">msource()</a></code> is in fact the only user-facing function in the
<strong>macro</strong> package.</p>
<div class="section level3">
<h3 id="how-to-use">How to Use<a class="anchor" aria-label="anchor" href="#how-to-use"></a>
</h3>
<p>To use the <strong>macro</strong> package, you will first write your
macro-enabled R code in a regular “.R” code file. You can use RStudio®
or another code editor. The macro statements are written as special
comments, as described above. To execute a macro-enabled program, simply
call the <code><a href="../reference/msource.html">msource()</a></code> function in the console and pass the
program path. That’s it!</p>
<p>If you are working in RStudio, the function will use the path of the
currently active program by default. In that case, you don’t need to do
hardly anything! Just call <code><a href="../reference/msource.html">msource()</a></code> in the console with no
parameters.</p>
</div>
<div class="section level3">
<h3 id="available-functionality">Available Functionality<a class="anchor" aria-label="anchor" href="#available-functionality"></a>
</h3>
<p>The <strong>macro</strong> package supports the most basic
functionality of a macro system. That includes:</p>
<ol style="list-style-type: decimal">
<li>
<strong>Macro Comments</strong>: Like regular R comments, but are
not emitted to the output file.</li>
<li>
<strong>Macro Variables</strong>: Allow you to assign a value to a
macro variable, and use the macro variable as a text replacement
token.</li>
<li>
<strong>Macro Conditionals</strong>: If-Then-Else logic that allows
you to conditionally execute a chunk of code.</li>
<li>
<strong>Macro Include</strong>: Inserts the contents of an external
file into your program.</li>
<li>
<strong>Built-in Macro Functions</strong>: A small number of macro
functions to make the system more practical.</li>
<li>
<strong>Macro Do Loops</strong>: Copies code inside the do block for
each iteration of the loop.</li>
<li>
<strong>User-Defined Macro Functions</strong>: The ability to create
a user-defined text-replacement function, with or without
parameters.</li>
</ol>
<div class="section level4">
<h4 id="macro-comments-and-variables">Macro Comments and Variables<a class="anchor" aria-label="anchor" href="#macro-comments-and-variables"></a>
</h4>
<p>Above we saw a simple macro variable assignment. Macro variables are
defined with the keyword <code>#%let</code> and then the variable name
and value.</p>
<p>We can document those macro assignments with macro comments. Macro
comments are prefixed with <code>#%</code>. You can type anything after
the prefix.</p>
<p>Note that macro comments are a single line comment. There are no
multi-line comments in R.</p>
<p>Here are a few macro variable assignments with comments for different
data types:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#% Assign integer value </span></span>
<span><span class="co">#%let v1 &lt;- 1</span></span>
<span></span>
<span><span class="co">#% Assign double value</span></span>
<span><span class="co">#%let v2 &lt;- 1.2</span></span>
<span></span>
<span><span class="co">#% Assign character value</span></span>
<span><span class="co">#%let v3 &lt;- "Hello World!"</span></span>
<span></span>
<span><span class="co">#% Assign date value</span></span>
<span><span class="co">#%let v4 &lt;- as.Date("2025-07-15")</span></span>
<span></span>
<span><span class="co">#% Assign vector</span></span>
<span><span class="co">#%let v5 &lt;- c(1, 2, 3, 4, 5)</span></span>
<span></span>
<span><span class="co">#% Assign calculated value</span></span>
<span><span class="co">#%let v6 &lt;- 2 + 2</span></span>
<span></span>
<span><span class="co">#% Assign using another macro variable</span></span>
<span><span class="co">#%let v7 &lt;- &amp;v6</span></span>
<span></span>
<span><span class="co">#% Calculate using another macro variable</span></span>
<span><span class="co">#%let v8 &lt;- &amp;v7 + 1</span></span></code></pre></div>
<p>Once a macro variable is assigned, it can be used as a text
replacement token anywhere in your program.</p>
<p>R macro variables begin with an ampersand (“&amp;”) prefix, just like
SAS. Also like SAS, a trailing dot (“.”) suffix is optional. The
trailing dot can help separate the macro variable from surrounding
text.</p>
<p>One difference is that, in R, the ampersand (“&amp;”) is normally not
allowed as the first character of a variable name.<br>
Therefore, when macro variables appear in open code, they must be
back-quoted to avoid errors.</p>
<p>For example, we can use some of the above macro assignments like
this:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Resolve inside a comment</span></span>
<span><span class="co"># The value of 'v1' is &amp;v1</span></span>
<span></span>
<span><span class="co"># Resolve in a text string</span></span>
<span><span class="va">a</span> <span class="op">&lt;-</span> <span class="st">"The value of 'v2' is &amp;v2"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Resolve in open code</span></span>
<span><span class="va">b</span> <span class="op">&lt;-</span> <span class="va">`&amp;v3`</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">b</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Resolve in a function</span></span>
<span><span class="va">c</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">`&amp;v5`</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">c</span><span class="op">)</span></span></code></pre></div>
<p>If we execute the above code using <code><a href="../reference/msource.html">msource()</a></code>, we’ll get
the following result:</p>
<pre><code>&gt; msource()
[1] "The value of 'v2' is 1.2"
[1] "Hello World!"
[1] 3</code></pre>
<p>And the generated code would look like this:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Resolve inside a comment</span></span>
<span><span class="co"># The value of 'v1' is 1</span></span>
<span></span>
<span><span class="co"># Resolve in a text string</span></span>
<span><span class="va">a</span> <span class="op">&lt;-</span> <span class="st">"The value of 'v2' is 1.2"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Resolve in open code</span></span>
<span><span class="va">b</span> <span class="op">&lt;-</span> <span class="st">"Hello World!"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">b</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Resolve in a function</span></span>
<span><span class="va">c</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">4</span>, <span class="fl">5</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">c</span><span class="op">)</span></span></code></pre></div>
<p>Notice in the above generated code that the macro variables
<code>&amp;v3</code> and <code>&amp;v5</code> were replaced exactly as
they were assigned. All macro variable resolution is text
replacement.</p>
</div>
<div class="section level4">
<h4 id="simple-macro-conditionals">Simple Macro Conditionals<a class="anchor" aria-label="anchor" href="#simple-macro-conditionals"></a>
</h4>
<p>Macro conditionals allow you to conditionally execute a chunk of
code. If a macro condition is TRUE, the code inside that condition will
be output to the generated code file and executed. Otherwise, the code
will not be emitted. This feature makes the generated code file more
compact.</p>
<p>Here are some examples of simple macro conditions:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#% Assign integer value </span></span>
<span><span class="co">#%let x = 1</span></span>
<span></span>
<span><span class="co">#%if (&amp;x == 1)</span></span>
<span>  <span class="co"># X is one</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"Inside the first condition"</span><span class="op">)</span></span>
<span><span class="co">#%elseif (&amp;x == 2)</span></span>
<span>  <span class="co"># X is two</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"Inside the second condition"</span><span class="op">)</span></span>
<span><span class="co">#%else </span></span>
<span>  <span class="co"># X is something else</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"Inside the else."</span><span class="op">)</span></span>
<span><span class="co">#%end</span></span></code></pre></div>
<p>When executed with <code><a href="../reference/msource.html">msource()</a></code>, the above code will
generate the result <code>"Inside the first condition"</code>. If you
pass a file name to the <code>file_out</code> parameter of the
<code><a href="../reference/msource.html">msource()</a></code> function, a code file will be generated. That
code file will contain the following content:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  <span class="co"># X is one</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"Inside the first condition"</span><span class="op">)</span></span></code></pre></div>
<p>Notice that all spacing and comments from inside the condition are
preserved. Also notice that all macro code and code from inside other
conditions has been removed. Only the code inside the TRUE condition has
been emitted.</p>
</div>
<div class="section level4">
<h4 id="nested-macro-conditionals">Nested Macro Conditionals<a class="anchor" aria-label="anchor" href="#nested-macro-conditionals"></a>
</h4>
<p>Macro conditionals can also be nested. Here is an example that
illustrates such conditionals:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#% Assign integers</span></span>
<span><span class="co">#%let x = 1</span></span>
<span><span class="co">#%let y = 2</span></span>
<span></span>
<span><span class="co">#%if (&amp;x. == 1)</span></span>
<span></span>
<span>  <span class="co">#%if (&amp;y. == 1)</span></span>
<span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"X is one and Y is 1"</span><span class="op">)</span></span>
<span></span>
<span>  <span class="co">#%else</span></span>
<span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"X is one and Y is &amp;y."</span><span class="op">)</span></span>
<span></span>
<span>  <span class="co">#%end</span></span>
<span></span>
<span><span class="co">#%elseif (&amp;x. == 2)</span></span>
<span></span>
<span>    <span class="co">#%if (&amp;y. == 1)</span></span>
<span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"X is two and Y is 1"</span><span class="op">)</span></span>
<span></span>
<span>    <span class="co">#%else</span></span>
<span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"X is two and Y is &amp;y."</span><span class="op">)</span></span>
<span></span>
<span>    <span class="co">#%end</span></span>
<span></span>
<span><span class="co">#%else</span></span>
<span></span>
<span>  <span class="co">#%if (&amp;y. == 1)</span></span>
<span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"X is &amp;x. and Y is 1"</span><span class="op">)</span></span>
<span></span>
<span>  <span class="co">#%else</span></span>
<span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"X is &amp;x. and Y is &amp;y."</span><span class="op">)</span></span>
<span></span>
<span>  <span class="co">#%end</span></span>
<span></span>
<span><span class="co">#%end</span></span></code></pre></div>
<p>The result of the above code will be “X is one and Y is 2”, and the
output file will look like this:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"X is one and Y is 2"</span><span class="op">)</span></span></code></pre></div>
<p>In this way, many levels of macro logic can be boiled down to a few
lines of generated code.</p>
</div>
<div class="section level4">
<h4 id="macro-include">Macro Include<a class="anchor" aria-label="anchor" href="#macro-include"></a>
</h4>
<p>There is no equivalent in Base R for a SAS macro include. The R
<code><a href="https://rdrr.io/r/base/source.html" class="external-link">source()</a></code> function executes an external code file. But it
does not “include” or “insert” the code into the calling program.
Therefore, the macro include from the <strong>macro</strong> package
brings a useful feature to R.</p>
<p>A macro include from the <strong>macro</strong> package looks like
this:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#%include 'c:/myfolder/myprogram.R'</span></span></code></pre></div>
<p>Upon execution by <code><a href="../reference/msource.html">msource()</a></code>, the contents of
“myprogram.R” will be extracted from the file and copied into the
calling program as text. The calling program will then be scanned for
macro commands that may have existed in “myprogram.R”. The result will
be a fully integrated program with all macro commands resolved.</p>
</div>
<div class="section level4">
<h4 id="macro-functions">Macro Functions<a class="anchor" aria-label="anchor" href="#macro-functions"></a>
</h4>
<p>There are a some built-in macro functions that are considered
necessary for proper operation of the system. The essential functions
are <code>%sysfunc()</code>, <code>%symexist()</code>, and
<code>%symput()</code>.</p>
</div>
<div class="section level4">
<h4 id="evaluating-and-formatting-expressions-sysfunc">Evaluating and Formatting Expressions: %sysfunc()<a class="anchor" aria-label="anchor" href="#evaluating-and-formatting-expressions-sysfunc"></a>
</h4>
<p>The <code>%sysfunc()</code> macro function allows you to evaluate an
R expression as part of a macro command. The expression can contain any
valid R function or operator. Observe:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co">#% Assign integer vector</span></span>
<span><span class="co">#%let a = c(2, 5, 8, 9)</span></span>
<span></span>
<span><span class="co">#% Sum vector without %sysfunc</span></span>
<span><span class="co">#%let b = sum(&amp;a) / 1.3</span></span>
<span></span>
<span><span class="co">#% Sum vector with %sysfunc</span></span>
<span><span class="co">#%let c = %sysfunc(sum(&amp;a) / 1.3)</span></span>
<span></span>
<span><span class="co">#% Format expression with %sysfunc</span></span>
<span><span class="co">#%let d = %sysfunc(sum(&amp;a) / 1.3, %.2f)</span></span>
<span></span>
<span><span class="co"># Text replacement</span></span>
<span><span class="va">w</span> <span class="op">&lt;-</span> <span class="va">`&amp;a`</span></span>
<span></span>
<span><span class="co"># Expression replacement</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="va">`&amp;b`</span></span>
<span></span>
<span><span class="co"># Evaluated with %sysfunc()</span></span>
<span><span class="va">y</span> <span class="op">&lt;-</span> <span class="va">`&amp;c`</span></span>
<span></span>
<span><span class="co"># Formatted with %sysfunc()</span></span>
<span><span class="va">z</span> <span class="op">&lt;-</span> <span class="va">`&amp;d`</span></span></code></pre></div>
<p>Here is the above code after pre-processing:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Text replacement</span></span>
<span><span class="va">w</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">5</span>, <span class="fl">8</span>, <span class="fl">9</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Expression replacement</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">5</span>, <span class="fl">8</span>, <span class="fl">9</span><span class="op">)</span><span class="op">)</span> <span class="op">/</span> <span class="fl">1.3</span></span>
<span></span>
<span><span class="co"># Evaluated with %sysfunc()</span></span>
<span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fl">18.4615384615385</span></span>
<span></span>
<span><span class="co"># Formatted with %sysfunc()</span></span>
<span><span class="va">z</span> <span class="op">&lt;-</span> <span class="fl">18.46</span></span></code></pre></div>
<p>Notice how the macro values resolve differently depending on whether
and how <code>%sysfunc()</code> is used.</p>
</div>
<div class="section level4">
<h4 id="checking-for-macro-variables-symexist">Checking For Macro Variables: %symexist()<a class="anchor" aria-label="anchor" href="#checking-for-macro-variables-symexist"></a>
</h4>
<p>The <code>%symexist()</code> macro function is used to determine
whether or not a macro variable exists. You will pass the name of the
macro variable without quotes and without the ampersand (“&amp;”) prefix
or the dot (“.”) suffix.</p>
<p>Here is a very simple example:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co">#%let a = 1</span></span>
<span></span>
<span><span class="co">#%if (%symexist(a))</span></span>
<span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"Macro variable 'a' exists!"</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"Here is the value: &amp;a"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#%else</span></span>
<span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"Macro variable 'a' does not exist!"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#%end</span></span>
<span></span>
<span><span class="co">#%if (%symexist(b))</span></span>
<span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"Macro variable 'b' exists!"</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"Here is the value: &amp;b"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#%else</span></span>
<span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"Macro variable 'b' does not exist!"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#%end</span></span></code></pre></div>
<p>And the resulting code looks like this:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"Macro variable 'a' exists!"</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"Here is the value: 1"</span><span class="op">)</span></span>
<span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"Macro variable 'b' does not exist!"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="assigning-macro-variables-from-execution-environment-symput">Assigning Macro Variables from Execution Environment: %symput()<a class="anchor" aria-label="anchor" href="#assigning-macro-variables-from-execution-environment-symput"></a>
</h4>
<p>The <code>%symput()</code> function allows you examine values in the
runtime environment during pre-processing. Notice below that you can
assign macro variable values based on regular R variables and
expressions:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Assign vector</span></span>
<span><span class="va">v1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"one"</span>, <span class="st">"two"</span>, <span class="st">"three"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#% Get length of vector</span></span>
<span><span class="co">#%let x &lt;- %symput(length(v1))</span></span>
<span></span>
<span><span class="co">#% Get vector values</span></span>
<span><span class="co">#%let y &lt;- %symput(v1)</span></span>
<span></span>
<span><span class="co"># Assign length with macro variable</span></span>
<span><span class="va">a</span> <span class="op">&lt;-</span> <span class="va">`&amp;x`</span></span>
<span></span>
<span><span class="co"># Assign vector values with macro variable</span></span>
<span><span class="va">b</span> <span class="op">&lt;-</span> <span class="va">`&amp;y`</span></span></code></pre></div>
<p>The generated code looks like this:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Assign vector</span></span>
<span><span class="va">v1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"one"</span>, <span class="st">"two"</span>, <span class="st">"three"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Assign length with macro variable</span></span>
<span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fl">3</span></span>
<span></span>
<span><span class="co"># Assign vector values with macro variable</span></span>
<span><span class="va">b</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'one'</span>, <span class="st">'two'</span>, <span class="st">'three'</span><span class="op">)</span></span></code></pre></div>
<p>As you can see, the <code>%symput()</code> function provides a way to
pass values back and forth between Base R and the macro language
seamlessly. This feature gives you the capability to make decisions in
pre-processing based on what is happening during execution.</p>
</div>
<div class="section level4">
<h4 id="macro-do-loops">Macro Do Loops<a class="anchor" aria-label="anchor" href="#macro-do-loops"></a>
</h4>
<p>Macro do loops can be used to easily copy a section of code multiple
times. Here is a modified version of the above <code>%symput()</code>
example that demonstrates a macro loop:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Assign vector</span></span>
<span><span class="va">v1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"one"</span>, <span class="st">"two"</span>, <span class="st">"three"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#% Get length of vector</span></span>
<span><span class="co">#%let x &lt;- %symput(length(v1))</span></span>
<span></span>
<span><span class="co">#% Get vector values</span></span>
<span><span class="co">#%let y &lt;- %symput(v1)</span></span>
<span></span>
<span><span class="co"># Print each value of vector &amp;y.</span></span>
<span><span class="co">#%do idx = 1 %to &amp;x.</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"Vector value %sysfunc(&amp;y[&amp;idx])"</span><span class="op">)</span></span>
<span><span class="co">#%end</span></span></code></pre></div>
<p>The above macro will produce the following console output:</p>
<pre><code>&gt; msource()
[1] "Vector value one"
[1] "Vector value two"
[1] "Vector value three"</code></pre>
<p>And here is the generated code:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Assign vector</span></span>
<span><span class="va">v1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"one"</span>, <span class="st">"two"</span>, <span class="st">"three"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Print each value of vector c('one', 'two', 'three')</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"Vector value one"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"Vector value two"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"Vector value three"</span><span class="op">)</span></span></code></pre></div>
<p>Note that you can have any number of statements inside the do loop.
This macro feature is useful when you are performing repetitive
operations, want to avoid copying the code, but still want a resolved
and transparent output file.</p>
</div>
<div class="section level4">
<h4 id="user-defined-macro-functions">User-defined Macro Functions<a class="anchor" aria-label="anchor" href="#user-defined-macro-functions"></a>
</h4>
<p>User-defined macro functions allow you to wrap up a set up
statements, assign a name to it, and call these functions as needed.
Calling the function will insert the contents of the function into the
generated file. It is important to note the difference between a regular
R function and an R macro function: an R macro function is still a text
replacement/insertion.</p>
<p>Here is an illustrative example:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#% Define macro function</span></span>
<span><span class="co">#%macro do_analysis(data, varname)</span></span>
<span><span class="co"># Analysis for "&amp;varname"</span></span>
<span><span class="va">mean_</span><span class="op">&amp;</span><span class="va">varname</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">`&amp;data`</span><span class="op">[[</span><span class="st">"&amp;varname"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">min_</span><span class="op">&amp;</span><span class="va">varname</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">`&amp;data`</span><span class="op">[[</span><span class="st">"&amp;varname"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">max_</span><span class="op">&amp;</span><span class="va">varname</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">`&amp;data`</span><span class="op">[[</span><span class="st">"&amp;varname"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">anal_</span><span class="op">&amp;</span><span class="va">varname</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="st">"Variable"</span> <span class="op">=</span> <span class="st">"&amp;varname"</span>,</span>
<span>                            <span class="st">"Mean"</span> <span class="op">=</span> <span class="va">mean_</span><span class="op">&amp;</span><span class="va">varname</span>,</span>
<span>                            <span class="st">"Min"</span>  <span class="op">=</span> <span class="va">min_</span><span class="op">&amp;</span><span class="va">varname</span>,</span>
<span>                            <span class="st">"Max"</span>  <span class="op">=</span> <span class="va">max_</span><span class="op">&amp;</span><span class="va">varname</span><span class="op">)</span></span>
<span><span class="co">#%mend</span></span>
<span></span>
<span><span class="co">#%do_analysis(mtcars, mpg)</span></span>
<span><span class="co">#%do_analysis(mtcars, cyl)</span></span>
<span><span class="co">#%do_analysis(mtcars, disp)</span></span>
<span></span>
<span><span class="co"># Combine analysis blocks</span></span>
<span><span class="va">final</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">anal_mpg</span>, <span class="va">anal_cyl</span>, <span class="va">anal_disp</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Print result</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">final</span><span class="op">)</span></span></code></pre></div>
<p>Here is the generated code. Notice that the code inside the macro
function is repeated for every call:</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Analysis for "mpg"</span></span>
<span><span class="va">mean_mpg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">[[</span><span class="st">"mpg"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">min_mpg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">[[</span><span class="st">"mpg"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">max_mpg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">[[</span><span class="st">"mpg"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">anal_mpg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="st">"Variable"</span> <span class="op">=</span> <span class="st">"mpg"</span>,</span>
<span>                            <span class="st">"Mean"</span> <span class="op">=</span> <span class="va">mean_mpg</span>,</span>
<span>                            <span class="st">"Min"</span>  <span class="op">=</span> <span class="va">min_mpg</span>,</span>
<span>                            <span class="st">"Max"</span>  <span class="op">=</span> <span class="va">max_mpg</span><span class="op">)</span></span>
<span><span class="co"># Analysis for "cyl"</span></span>
<span><span class="va">mean_cyl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">[[</span><span class="st">"cyl"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">min_cyl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">[[</span><span class="st">"cyl"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">max_cyl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">[[</span><span class="st">"cyl"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">anal_cyl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="st">"Variable"</span> <span class="op">=</span> <span class="st">"cyl"</span>,</span>
<span>                            <span class="st">"Mean"</span> <span class="op">=</span> <span class="va">mean_cyl</span>,</span>
<span>                            <span class="st">"Min"</span>  <span class="op">=</span> <span class="va">min_cyl</span>,</span>
<span>                            <span class="st">"Max"</span>  <span class="op">=</span> <span class="va">max_cyl</span><span class="op">)</span></span>
<span><span class="co"># Analysis for "disp"</span></span>
<span><span class="va">mean_disp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">[[</span><span class="st">"disp"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">min_disp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">[[</span><span class="st">"disp"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">max_disp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">[[</span><span class="st">"disp"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">anal_disp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="st">"Variable"</span> <span class="op">=</span> <span class="st">"disp"</span>,</span>
<span>                            <span class="st">"Mean"</span> <span class="op">=</span> <span class="va">mean_disp</span>,</span>
<span>                            <span class="st">"Min"</span>  <span class="op">=</span> <span class="va">min_disp</span>,</span>
<span>                            <span class="st">"Max"</span>  <span class="op">=</span> <span class="va">max_disp</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Combine analysis blocks</span></span>
<span><span class="va">final</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">anal_mpg</span>, <span class="va">anal_cyl</span>, <span class="va">anal_disp</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Print result</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">final</span><span class="op">)</span></span></code></pre></div>
<p>The result of the above code is a data frame that contains analysis
for all three variables. The console output looks like this:</p>
<pre><code>&gt; msource()
  Variable      Mean  Min   Max
1      mpg  20.09062 10.4  33.9
2      cyl   6.18750  4.0   8.0
3     disp 230.72188 71.1 472.0</code></pre>
<p>Using combinations of macro functions, macro do loops, and macro
conditions, you can create very dynamic, flexible, and useful
programs.</p>
</div>
</div>
</div>
<div class="section level2">
<h2 id="next-steps">Next Steps<a class="anchor" aria-label="anchor" href="#next-steps"></a>
</h2>
<p>Here are some more articles for further exploration of the
<strong>macro</strong> package:</p>
<ul>
<li><a href="macro-language.html">Macro Language Glossary</a></li>
<li><a href="macro-debug.html">Debugging</a></li>
<li><a href="macro-example1.html">Example 1: Listing</a></li>
<li><a href="macro-example2.html">Example 2: Another Listing</a></li>
<li><a href="macro-example3.html">Example 3: Table</a></li>
<li><a href="macro-disclaimer.html">Disclaimer</a></li>
<li><a href="macro-faq.html">Frequently Asked Questions</a></li>
</ul>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by David Bosak.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

      </footer>
</div>






  </body>
</html>

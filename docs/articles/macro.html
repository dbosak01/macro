<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>macro • macro</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="macro">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">macro</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"></ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="../articles/macro.html">Get started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/macro-example1.html">Example 1: Listing</a>
    </li>
    <li>
      <a href="../articles/macro-example2.html">Example 2: Table</a>
    </li>
    <li>
      <a href="../articles/macro-disclaimer.html">Disclaimer</a>
    </li>
    <li>
      <a href="../articles/macro-faq.html">Frequently Asked Questions</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href=".././articles/macro-faq.html">FAQ</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
<li>
  <a href="https://github.com/dbosak01/macro/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>macro</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/dbosak01/macro/blob/HEAD/vignettes/macro.Rmd" class="external-link"><code>vignettes/macro.Rmd</code></a></small>
      <div class="hidden name"><code>macro.Rmd</code></div>

    </div>

    
    
<p>The <strong>macro</strong> package provides macro commands and a
pre-processor for R programs. The package can be useful in several ways.
Before illustrating the functionality, Let’s first discuss the macro
concept at a high level.</p>
<div class="section level2">
<h2 id="macro-concept">Macro Concept<a class="anchor" aria-label="anchor" href="#macro-concept"></a>
</h2>
<p>A macro language is like a meta-language for code. The meta-language
runs first, generates the regular code, and then the regular code is
executed to produce some sort of output.</p>
<p>The SAS® macro language is commonly used in SAS programs. The R
<strong>macro</strong> package was inspired by SAS.</p>
</div>
<div class="section level2">
<h2 id="an-r-macro-language">An R Macro Language<a class="anchor" aria-label="anchor" href="#an-r-macro-language"></a>
</h2>
<p>Clearly, a macro language for R will not be the same as the SAS macro
language. The SAS macro language is built into the SAS execution
environment. The SAS pre-processor is run automatically, and the macro
syntax is understood by the SAS syntax checker.</p>
<p>With R, none of the above applies. R does not have a built-in macro
language, does not have a built-in pre-processor, and the R syntax
checker will not expect any sort of macro language syntax.</p>
<p>Therefore, to build a macro-like functionality in R, we must get a
little creative.</p>
</div>
<div class="section level2">
<h2 id="macro-statements">Macro Statements<a class="anchor" aria-label="anchor" href="#macro-statements"></a>
</h2>
<p>The first thing to note is that macro statements in the
<strong>macro</strong> package are written as code comments. The
comments ensure that the R syntax checker will not generate an error
when parsing the macro functions.</p>
<p>In SAS, macro functions are prefixed with a percent sign (%). In R,
macro statements are therefore prefixed with a comment symbol (#) and a
percent sign (%). A simple macro assignment looks like this:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#%let x = 1</span></span></code></pre></div>
<p>A simple macro conditional looks like this:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#%if (x. == 1)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"x is one!"</span><span class="op">)</span></span>
<span><span class="co">#%else</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"x is something else!"</span><span class="op">)</span></span>
<span><span class="co">#%end</span></span></code></pre></div>
<p>Note that the above R macro syntax is not identical to the SAS
syntax. The syntax is a blend of SAS and R syntax, all inside a macro
comment.</p>
</div>
<div class="section level2">
<h2 id="the-msource-function">The msource() function<a class="anchor" aria-label="anchor" href="#the-msource-function"></a>
</h2>
<p>In the <strong>macro</strong> package, pre-processing of the macro
code is accomplished by a special function: <code><a href="../reference/msource.html">msource()</a></code>. The
<code><a href="../reference/msource.html">msource()</a></code> function is similar to the <code><a href="https://rdrr.io/r/base/source.html" class="external-link">source()</a></code>
function in R. The <code><a href="../reference/msource.html">msource()</a></code> function will execute your
code, just like the <code><a href="https://rdrr.io/r/base/source.html" class="external-link">source()</a></code> function. First, however, it
will execute the <strong>macro</strong> pre-processor.</p>
<p>The steps can be summarized as follows:</p>
<p>Step 1: Pre-process the code and resolve all macro language
syntax.<br>
Step 2: Generate a new code file with the resolved code. Step 3: Execute
the resolved code with the <code><a href="https://rdrr.io/r/base/source.html" class="external-link">source()</a></code> function.</p>
<p>Notice that the above steps map directly to the way the SAS macro
processor works.</p>
<p>In addition, the R macro language is a text-replacement language,
just like SAS. Macro variables are swapped out with real values as text
replacements. Macro conditions are evaluated, and only the code in the
TRUE macro conditions is executed.</p>
<p>All of the above is handled by the <code><a href="../reference/msource.html">msource()</a></code> function.
<code><a href="../reference/msource.html">msource()</a></code> is in fact the only user-facing function in the
<strong>macro</strong> package.</p>
<div class="section level3">
<h3 id="how-to-use">How to Use<a class="anchor" aria-label="anchor" href="#how-to-use"></a>
</h3>
<p>You will write your macro-enabled R code in a regular .R code file.
You can use RStudio or another code editor. The macro statements are
written as special comments, as described above. To execute a
macro-enabled program, simply call the <code><a href="../reference/msource.html">msource()</a></code> function
in the console and pass the program path. That’s it!</p>
<p>If you are working in RStudio, the function will use the path of the
currently active program by default. In that case, you don’t need to do
hardly anything! Just call <code><a href="../reference/msource.html">msource()</a></code> in the console with no
parameters.</p>
</div>
<div class="section level3">
<h3 id="available-functionality">Available Functionality<a class="anchor" aria-label="anchor" href="#available-functionality"></a>
</h3>
<p>The <strong>macro</strong> package supports the most basic
functionality of a macro system. That includes:</p>
<ol style="list-style-type: decimal">
<li>Macro Comments: Like regular R comments, but are not emitted to the
output file.</li>
<li>Macro Variables: Allow you to assign a value to a macro variable,
and use the macro variable as a text replacement token.</li>
<li>Macro Conditionals: If-Then-Else logic that allows you to
conditionally execute a chunk of code.</li>
<li>Macro Include: Inserts the contents of an external file into your
program.</li>
<li>Macro Functions: The package supports a small number of macro
functions to make the system more useful.</li>
</ol>
<div class="section level4">
<h4 id="macro-comments-and-variables">Macro Comments and Variables<a class="anchor" aria-label="anchor" href="#macro-comments-and-variables"></a>
</h4>
<p>Above we saw a simple macro variable assignment. Macro variables are
defined with the keyword <code>#%let</code> and then the variable name
and value.</p>
<p>We can document those macro assignments with macro comments. Macro
comments are prefixed with <code>#%</code>. You can type anything after
the prefix. These comments are not emitted to the generated file.</p>
<p>Note that macro comments are a single line comment. There are no
multi-line comments in R.</p>
<p>Here are a few macro variable assignments with comments for different
data types:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#% Assign integer value </span></span>
<span><span class="co">#%let v1 = 1</span></span>
<span></span>
<span><span class="co">#% Assign double value</span></span>
<span><span class="co">#%let v2 = 1.2</span></span>
<span></span>
<span><span class="co">#% Assign character value</span></span>
<span><span class="co">#%let v3 = "Hello World!"</span></span>
<span></span>
<span><span class="co">#% Assign date value</span></span>
<span><span class="co">#%let v4 = as.Date("2025-07-15")</span></span>
<span></span>
<span><span class="co">#% Assign vector</span></span>
<span><span class="co">#%let v5 = c(1, 2, 3, 4, 5)</span></span>
<span></span>
<span><span class="co">#% Assign calculated value</span></span>
<span><span class="co">#%let v6 = 2 + 2</span></span>
<span></span>
<span><span class="co">#% Assign using another macro variable</span></span>
<span><span class="co">#%let v7 = v6.</span></span>
<span></span>
<span><span class="co">#% Calculate using another macro variable</span></span>
<span><span class="co">#%let v8 = v7. + 1</span></span></code></pre></div>
<p>Once a macro variable is assigned, it can be used as a text
replacement token anywhere in your program.</p>
<p>Note that R macro variables have no ampersand (“&amp;”) prefix. The
reason is that R does not allow special characters in variable names.
Therefore, R macro variables are identified simply by a dot (“.”)
suffix.</p>
<p>For example, we can use some of the above macro assignments like
this:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Print inside loop</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">idx</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">1</span>, <span class="va">v6.</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">v3.</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>If we execute the above code using <code><a href="../reference/msource.html">msource()</a></code>, we’ll get
the following result:</p>
<pre><code>&gt; msource()
[1] "Hello World!"
[1] "Hello World!"
[1] "Hello World!"
[1] "Hello World!"</code></pre>
<p>And the generated code would look like this:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Print inside loop</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">idx</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span> <span class="op">+</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"Hello World!"</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Notice in the above generated code that the macro variables
<code>v3.</code> and <code>v6.</code> were replaced exactly as they were
assigned. Macro variable expressions are not resolved unless explicitly
evaluated.</p>
</div>
<div class="section level4">
<h4 id="simple-macro-conditionals">Simple Macro Conditionals<a class="anchor" aria-label="anchor" href="#simple-macro-conditionals"></a>
</h4>
<p>Macro conditionals allows you to conditionally execute a chunk of
code. If a macro condition is TRUE, the code inside that condition will
be output to the generated code file and executed. Otherwise, the code
will not be emitted. This feature makes the generated code file more
compact.</p>
<p>Here are some examples of simple macro conditions:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#% Assign integer value </span></span>
<span><span class="co">#%let x = 1</span></span>
<span></span>
<span><span class="co">#%if (x. == 1)</span></span>
<span>  <span class="co"># X is one</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"Inside the first condition"</span><span class="op">)</span></span>
<span><span class="co">#%elseif (x. == 2)</span></span>
<span>  <span class="co"># X is two</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"Inside the second condition"</span><span class="op">)</span></span>
<span><span class="co">#%else </span></span>
<span>  <span class="co"># X is something else</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"Inside the else."</span><span class="op">)</span></span>
<span><span class="co">#%end</span></span></code></pre></div>
<p>When executed with <code><a href="../reference/msource.html">msource()</a></code>, the above code will
generate the result <code>"Inside the first condition"</code>. If you
pass a file name to the <code>file_out</code> parameter of the
<code><a href="../reference/msource.html">msource()</a></code> function, a code file will be generated. That
code fill will contain the following content:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  <span class="co"># X is one</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"Inside the first condition"</span><span class="op">)</span></span></code></pre></div>
<p>Notice that all spacing and comments from inside the condition are
preserved. Also notice that all macro code and code from inside other
conditions has been removed. This feature allows you to generate
efficient and readable code files with minimal effort.</p>
</div>
<div class="section level4">
<h4 id="nested-macro-conditionals">Nested Macro Conditionals<a class="anchor" aria-label="anchor" href="#nested-macro-conditionals"></a>
</h4>
<p>Macro conditionals can also be nested. Here is an example that
illustrates such conditionals:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#% Assign integers</span></span>
<span><span class="co">#%let x = 1</span></span>
<span><span class="co">#%let y = 2</span></span>
<span></span>
<span><span class="co">#%if (x. == 1)</span></span>
<span></span>
<span>  <span class="co">#%if (y. == 1)</span></span>
<span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"X is one and Y is 1"</span><span class="op">)</span></span>
<span></span>
<span>  <span class="co">#%else</span></span>
<span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"X is one and Y is y."</span><span class="op">)</span></span>
<span></span>
<span>  <span class="co">#%end</span></span>
<span></span>
<span><span class="co">#%elseif (x. == 2)</span></span>
<span></span>
<span>    <span class="co">#%if (y. == 1)</span></span>
<span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"X is two and Y is 1"</span><span class="op">)</span></span>
<span></span>
<span>    <span class="co">#%else</span></span>
<span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"X is two and Y is y."</span><span class="op">)</span></span>
<span></span>
<span>    <span class="co">#%end</span></span>
<span></span>
<span><span class="co">#%else</span></span>
<span></span>
<span>  <span class="co">#%if (y. == 1)</span></span>
<span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"X is x. and Y is 1"</span><span class="op">)</span></span>
<span></span>
<span>  <span class="co">#%else</span></span>
<span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"X is x. and Y is y."</span><span class="op">)</span></span>
<span></span>
<span>  <span class="co">#%end</span></span>
<span></span>
<span><span class="co">#%end</span></span></code></pre></div>
<p>The result of the above code will be “X is one and Y is 2”, and the
output file will look like this:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"X is one and Y is 2"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="macro-include">Macro Include<a class="anchor" aria-label="anchor" href="#macro-include"></a>
</h4>
<p>There is no equivalent in R for a SAS macro include. The R
<code><a href="https://rdrr.io/r/base/source.html" class="external-link">source()</a></code> function executes an external code file. But it
does not “include” or “insert” the code into the calling program.
Therefore, the macro include from the <strong>macro</strong> package
brings a useful feature to R.</p>
<p>A macro include from the <strong>macro</strong> package looks like
this:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#%include 'c:/myfolder/myprogram.R'</span></span></code></pre></div>
<p>Upon execution by <code><a href="../reference/msource.html">msource()</a></code>, the contents of
“myprogram.R” will be extracted from the file and copied into the
calling program as text. The calling program will then be scanned for
macro commands that may have existed in “myprogram.R”. The result will
be a fully integrated program with all macro commands resolved.</p>
</div>
<div class="section level4">
<h4 id="macro-functions">Macro Functions<a class="anchor" aria-label="anchor" href="#macro-functions"></a>
</h4>
<p>There are a couple macro functions that are considered necessary for
proper operation of the system. The essential functions are
<code>%sysfunc()</code> and <code>%symexist()</code>.</p>
<div class="section level5">
<h5 id="sysfunc">%sysfunc()<a class="anchor" aria-label="anchor" href="#sysfunc"></a>
</h5>
<p>The <code>%sysfunc()</code> macro function allows you to evaluate an
R expression as part of a macro command. The expression can contain any
valid R function or operator. Observe:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co">#% Assign integer vector</span></span>
<span><span class="co">#%let a = c(2, 5, 8, 9)</span></span>
<span></span>
<span><span class="co">#% Sum vector without %sysfunc</span></span>
<span><span class="co">#%let b = sum(a.) / 1.3</span></span>
<span></span>
<span><span class="co">#% Sum vector with %sysfunc</span></span>
<span><span class="co">#%let c = %sysfunc(sum(a.) / 1.3)</span></span>
<span></span>
<span><span class="co">#% Format expression with %sysfunc</span></span>
<span><span class="co">#%let d = %sysfunc(sum(a.) / 1.3)</span></span>
<span></span>
<span><span class="co"># Text replacement</span></span>
<span><span class="va">w</span> <span class="op">&lt;-</span> <span class="va">a.</span></span>
<span></span>
<span><span class="co"># Expression replacement</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="va">b.</span></span>
<span></span>
<span><span class="co"># Evaluated with %sysfunc()</span></span>
<span><span class="va">y</span> <span class="op">&lt;-</span> <span class="va">c.</span></span>
<span></span>
<span><span class="co"># Formatted with %sysfunc()</span></span>
<span><span class="va">z</span> <span class="op">&lt;-</span> <span class="va">d.</span></span></code></pre></div>
<p>Here is the above code after pre-processing:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Text replacement</span></span>
<span><span class="va">w</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">5</span>, <span class="fl">8</span>, <span class="fl">9</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Expression replacement</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">5</span>, <span class="fl">8</span>, <span class="fl">9</span><span class="op">)</span><span class="op">)</span> <span class="op">/</span> <span class="fl">1.3</span></span>
<span></span>
<span><span class="co"># Evaluated with %sysfunc()</span></span>
<span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fl">18.4615384615385</span></span>
<span></span>
<span><span class="co"># Formatted with %sysfunc()</span></span>
<span><span class="va">z</span> <span class="op">&lt;-</span> <span class="fl">18.46</span></span></code></pre></div>
<p>Notice how the macro values resolve differently depending on whether
<code>%sysfunc()</code> is used or not used.</p>
</div>
<div class="section level5">
<h5 id="symexist">%symexist()<a class="anchor" aria-label="anchor" href="#symexist"></a>
</h5>
<p>The <code>%symexist()</code> macro function is used to determine
whether or not a macro variable exists. You will pass the name of the
macro variable without quotes and without the “.” suffix.</p>
<p>Here is a very simple example:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co">#%let a = 1</span></span>
<span></span>
<span><span class="co">#%if (%symexist(a))</span></span>
<span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"Macro variable 'a' exists!"</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"Here is the value: a."</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#%else</span></span>
<span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"Macro variable 'a' does not exist!"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#%end</span></span>
<span></span>
<span><span class="co">#%if (%symexist(b))</span></span>
<span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"Macro variable 'b' exists!"</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"Here is the value: b."</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#%else</span></span>
<span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"Macro variable 'b' does not exist!"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#%end</span></span></code></pre></div>
<p>And the resulting code looks like this:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"Macro variable 'a' exists!"</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"Here is the value: 1"</span><span class="op">)</span></span>
<span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"Macro variable 'b' does not exist!"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="next-steps">Next Steps<a class="anchor" aria-label="anchor" href="#next-steps"></a>
</h2>
<p>Here are the things to look at next:</p>
<ul>
<li>Example 1</li>
<li>Example 2</li>
<li>Disclaimer</li>
</ul>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by David Bosak.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

      </footer>
</div>






  </body>
</html>

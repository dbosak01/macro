<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Macro Source Function — msource • macro</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><script src="../extra.js"></script><meta property="og:title" content="Macro Source Function — msource"><meta property="og:description" content="The msource function is used to pre-process and source macro-enabled
programs. The function first runs the macro pre-processor to evaluate
any macro commands. During macro evaluation, an output file is created
that contains generated code. After pre-processing, this generated code
is sourced normally."><meta property="og:image" content="https://macro.r-sassy.org/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">macro</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"></ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="../articles/macro.html">Get started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/macro-setup.html">Installation and Setup</a>
    </li>
    <li>
      <a href="../articles/macro-language.html">Macro Language Reference</a>
    </li>
    <li>
      <a href="../articles/macro-symtable.html">Symbol Table Functions</a>
    </li>
    <li>
      <a href="../articles/macro-debug.html">Debugging</a>
    </li>
    <li>
      <a href="../articles/macro-globals.html">Global Options</a>
    </li>
    <li>
      <a href="../articles/macro-example1.html">Example 1: Listing</a>
    </li>
    <li>
      <a href="../articles/macro-example2.html">Example 2: Another Listing</a>
    </li>
    <li>
      <a href="../articles/macro-example3.html">Example 3: Table</a>
    </li>
    <li>
      <a href="../articles/macro-faq.html">Frequently Asked Questions</a>
    </li>
  </ul></li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href=".././articles/macro-faq.html">FAQ</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
<li>
  <a href="https://github.com/dbosak01/macro/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Macro Source Function</h1>
    <small class="dont-index">Source: <a href="https://github.com/dbosak01/macro/blob/HEAD/R/msource.R" class="external-link"><code>R/msource.R</code></a></small>
    <div class="hidden name"><code>msource.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The <code>msource</code> function is used to pre-process and source macro-enabled
programs. The function first runs the macro pre-processor to evaluate
any macro commands. During macro evaluation, an output file is created
that contains generated code. After pre-processing, this generated code
is sourced normally.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">msource</span><span class="op">(</span></span>
<span>  pth <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  file_out <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  envir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sys.parent.html" class="external-link">parent.frame</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  exec <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  debug <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  debug_out <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  symbolgen <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  echo <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  clear <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-pth">pth<a class="anchor" aria-label="anchor" href="#arg-pth"></a></dt>
<dd><p>The path to the R program to process. This parameter is required.
It will default to the currently activated program in the development environment.</p></dd>


<dt id="arg-file-out">file_out<a class="anchor" aria-label="anchor" href="#arg-file-out"></a></dt>
<dd><p>If you want to save or view the generated code
from the <code>msource</code> function, supply a full path and
file name on this parameter. Default is NULL. When NULL,
the function will create a temp file for the generated code. The temp
file will be deleted when processing is complete.</p></dd>


<dt id="arg-envir">envir<a class="anchor" aria-label="anchor" href="#arg-envir"></a></dt>
<dd><p>The environment to be used for program execution, or the
keyword "local". Default is the parent frame.  If the parent frame is used,
all variables and data initialized in the executed program will be available in
the parent frame.  If you do not want variables created in the parent frame,
pass the quoted string "local" to have the function execute in a local
environment.</p></dd>


<dt id="arg-exec">exec<a class="anchor" aria-label="anchor" href="#arg-exec"></a></dt>
<dd><p>Whether or not to execute the output file after pre-processing.
Default is TRUE. When FALSE, only the pre-processing step is performed.
If a <code>file_out</code> parameter is supplied, the generated code file
will still be created.</p></dd>


<dt id="arg-debug">debug<a class="anchor" aria-label="anchor" href="#arg-debug"></a></dt>
<dd><p>If TRUE, prints lines to the console as they are processed.
This information case be useful for debugging macro code.
Default is FALSE.</p></dd>


<dt id="arg-debug-out">debug_out<a class="anchor" aria-label="anchor" href="#arg-debug-out"></a></dt>
<dd><p>A path to a file to be used for debugging.  If a path
is supplied, debug output will be written to the file instead of the
console. Default is NULL.</p></dd>


<dt id="arg-symbolgen">symbolgen<a class="anchor" aria-label="anchor" href="#arg-symbolgen"></a></dt>
<dd><p>If debugger is on, this option will display the name and value
of any macro variables encountered during resolution. Default is FALSE.</p></dd>


<dt id="arg-echo">echo<a class="anchor" aria-label="anchor" href="#arg-echo"></a></dt>
<dd><p>Whether or not to echo the generated code to the console.
Default is TRUE.</p></dd>


<dt id="arg-clear">clear<a class="anchor" aria-label="anchor" href="#arg-clear"></a></dt>
<dd><p>Whether or not to clear the macro symbol table before
pre-processing begins.  Default is TRUE.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Follow-on parameters to the <code>source</code> function. See
the <code><a href="https://rdrr.io/r/base/source.html" class="external-link">source</a></code> function for additional information.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>The results of the <code><a href="https://rdrr.io/r/base/source.html" class="external-link">source()</a></code> function, invisibly.  The path
of the resolved output file is also included under the "$output" list item.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>R does not have a native macro language.  The <strong>macro</strong> package
attempts to make up for that deficiency.  The package devised a set
of macro commands inspired by SAS syntax, which can be added to any R script.
The macro commands are placed in R comments, prefixed by the characters
"#%".</p>
<p>The macro commands function as pre-processor directives, and the
<code>msource</code> function is the pre-processor.  These commands operate as
text replacement and branching functions.  They allow you to perform
high-level manipulation of your program before the code is executed.</p>
    </div>
    <div id="how-to-use">
    <h2>How to Use</h2>


<p>The <code>msource</code> function works very much like the Base R <code>source</code>
function.  You pass the path to the code file as the first parameter, and
<code>msource</code> will run it.  The difference is that <code>msource</code> will
first pre-process the file and resolve any macro commands. The resolved
code is placed by default into a temp file and then executed.  If you wish
to save the generated code, supply a local path on the <code>file_out</code>
parameter.</p>
<p>The <code>msource</code> function can be run on the command line or from an R script.
When run from the command line, the function will take the currently active
program in RStudio as the default input.  That means if you are working
interactively in RStudio, you can easily execute your macro code just by
running <code>msource()</code> on the command line with no parameters.</p>
    </div>
    <div id="macro-commands">
    <h2>Macro Commands</h2>


<p>Here is a summary of the available macro commands:</p><ul><li><p><strong>#%&lt;comment&gt;</strong>: A macro comment.</p></li>
<li><p><strong>#%let &lt;variable&gt; &lt;- &lt;value&gt;</strong>: Declares a macro variable
and assigns it a value.</p></li>
<li><p><strong>#%include '&lt;path&gt;'</strong>: Inserts code from included file as text
into current program.</p></li>
<li><p><strong>#%if (&lt;condition&gt;)</strong>: Begins a macro conditional block.</p></li>
<li><p><strong>#%elseif (&lt;condition&gt;)</strong>: Defines a subsequent conditional block.</p></li>
<li><p><strong>#%else</strong>: Identifies the default behavior in a condition.</p></li>
<li><p><strong>#%end</strong>: Ends a macro condition.</p></li>
<li><p><strong>#%do &lt;variable&gt; = &lt;start&gt; %to &lt;end&gt;</strong>: Defines a
macro do loop block.</p></li>
<li><p><strong>%sysfunc(&lt;expression&gt;)</strong>: Evaluates an R expression as part of
a macro command.</p></li>
<li><p><strong>%symexist(&lt;name&gt;)</strong>: Determines if a macro variable name
exists in the macro symbol table.</p></li>
<li><p><strong>%symput(&lt;expression&gt;)</strong>: Assigns the result of
an expression in the execution environment to a macro variable.</p></li>
<li><p><strong>%nrstr(&lt;expression&gt;)</strong>: A macro quoting function that
masks the enclosed expression to prevent resolution.</p></li>
<li><p><strong>#%macro &lt;name&gt;(&lt;parm1&gt;, &lt;parm2&gt;, ...)</strong>:
Declares the start of a macro function, identifies the function name,
and defines any parameters.</p></li>
<li><p><strong>#%mend</strong>: Ends a macro function definition.</p></li>
</ul><p>You can find extensive documentation for the above macro commands in the
the Macro Language vignette. To access the vignette, run
<code><a href="../articles/macro-language.html">vignette("macro-language")</a></code> on the R command line.</p>
    </div>
    <div id="pre-processor">
    <h2>Pre-Processor</h2>


<p>There are three main steps to processing a macro-enabled program: pre-process
the input file, generate an output file, and then execute the
output file.</p>
<p>The pre-processor works by inputting each line of the program line by line.
For each line in the input
script, the function will assign and replace any macro variables. The pre-processor
also evaluates any macro conditions.  For any macro conditions that are
TRUE, the pre-processor will output that line to the generated code file.
If a condition evaluates as FALSE, the lines inside that block will
be ignored.</p>
<p>In short, the pre-processor scans the input program from top to bottom,
spitting out lines or not depending on the macro conditions.  This
logic makes the <strong>macro</strong> package perfect for code generation.</p>
    </div>
    <div id="code-generation">
    <h2>Code Generation</h2>


<p>Code generation in R is most often performed using string concatenation, and
writing out strings to a file.  The <strong>macro</strong> package gives you
a much easier way to do it. Using pre-processor directives, you can
write your code as normal code.  These code lines will be subject to the
syntax checker, and any errors in syntax will be highlighted immediately.</p>
<p>The <strong>macro</strong> package also makes it easy to construct code from
code snippets.  You can store your snippets in separate files, and
then pull them together using <code>#%include</code> and macro logic.</p>
<p>The collation process is further enhanced by the <strong>macro</strong> debugger.
The debugger allows you to solve issues in the macro code much
faster and easier than doing string concatenation.</p>
    </div>
    <div id="debugger">
    <h2>Debugger</h2>


<p>The <code>msource</code> function has a built-in debugger.  The debugger can be
very useful when identifying problems in your macro-enabled program.  The
debugger can be activated by setting <code>debug = TRUE</code> on your call
to <code>msource</code>.  When activated, the debugger will by default send
debug information to the R console. The debug information can show you
which lines made it into the output file, and how those lines resolved.
It will also echo the source call for the generated code. If an error occurs
at either of these stages, the debug information will help you pinpoint
which line produced the error.</p>
<p>For a full explanation of the debugger capabilities and several examples,
see the debugging vignette at <code><a href="../articles/macro-debug.html">vignette('macro-debug')</a></code>.</p>
    </div>
    <div id="output-file-execution">
    <h2>Output File Execution</h2>


<p>Once the output file has been generated successfully, the <code>msource</code>
function will execute it normally using the Base R <code>source</code> function.
At this point the generated code runs like a normal R program, and any
errors or warnings will be sent to the console by default.</p>
<p>If you do not wish to execute the generated code, use the <code>exec</code> parameter
to turn off execution.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://macro.r-sassy.org">macro</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co">########################################################################</span></span>
<span><span class="co"># Example 1:  Hello World Macro</span></span>
<span><span class="co">########################################################################</span></span>
<span></span>
<span><span class="co"># Get path to demo macro program</span></span>
<span><span class="va">src</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/Demo1.R"</span>, package <span class="op">=</span> <span class="st">"macro"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create temporary output path</span></span>
<span><span class="va">tmp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"Demo1_mod.R"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Display source code</span></span>
<span><span class="co"># - This is the macro input code</span></span>
<span><span class="va">cd</span> <span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/readLines.html" class="external-link">readLines</a></span><span class="op">(</span><span class="va">src</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">cd</span>, <span class="st">"\n"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co"># #%let a &lt;- 1</span></span>
<span><span class="co"># #%if (&amp;a. == 1)</span></span>
<span><span class="co"># print("Hello World!")</span></span>
<span><span class="co"># #%else</span></span>
<span><span class="co"># print("Goodbye!")</span></span>
<span><span class="co"># #%end</span></span>
<span></span>
<span><span class="co"># Macro Execute Source Code</span></span>
<span><span class="co"># - Results displayed below</span></span>
<span><span class="fu">msource</span><span class="op">(</span><span class="va">src</span>, <span class="va">tmp</span><span class="op">)</span></span>
<span><span class="co"># [1] "Hello World!"</span></span>
<span></span>
<span><span class="co"># View output file</span></span>
<span><span class="co"># - This is the generated code</span></span>
<span><span class="va">tcd</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readLines.html" class="external-link">readLines</a></span><span class="op">(</span><span class="va">tmp</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">tcd</span>, <span class="st">"\n"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co"># print("Hello World!")</span></span>
<span></span>
<span><span class="co">########################################################################</span></span>
<span><span class="co"># Example 2:  Perform correlation analysis between variables in MTCARS</span></span>
<span><span class="co">########################################################################</span></span>
<span></span>
<span><span class="co"># Get path to demo macro program</span></span>
<span><span class="va">src</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/Demo2.R"</span>, package <span class="op">=</span> <span class="st">"macro"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create temporary output path</span></span>
<span><span class="va">tmp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"Demo2_mod.R"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Display source code</span></span>
<span><span class="va">cd</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readLines.html" class="external-link">readLines</a></span><span class="op">(</span><span class="va">src</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">cd</span>, <span class="st">"\n"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co"># #% Macro for Correlation Analysis</span></span>
<span><span class="co"># #%macro get_correlation(dat, xvar, yvars)</span></span>
<span><span class="co">#</span></span>
<span><span class="co"># # Perform Analysis ------------------------------------</span></span>
<span><span class="co">#</span></span>
<span><span class="co"># #%do idx = 1 %to %sysfunc(length(&amp;yvars))</span></span>
<span><span class="co">#</span></span>
<span><span class="co"># #%let yvar &lt;- %sysfunc(&amp;yvars[&amp;idx])</span></span>
<span><span class="co"># #%let xdat &lt;- &amp;dat$&amp;xvar</span></span>
<span><span class="co"># #%let ydat &lt;- &amp;dat$&amp;yvar</span></span>
<span><span class="co"># # Correlation between &amp;xvar and &amp;yvar</span></span>
<span><span class="co"># anl_&amp;yvar &lt;- data.frame(XVAR = "&amp;xvar",</span></span>
<span><span class="co">#                         YVAR = "&amp;yvar",</span></span>
<span><span class="co">#                         COR = cor(`&amp;xdat`, `&amp;ydat`,</span></span>
<span><span class="co">#                                   method = "pearson"))</span></span>
<span><span class="co"># #%end</span></span>
<span><span class="co">#</span></span>
<span><span class="co">#</span></span>
<span><span class="co"># # Bind Results ----------------------------------------</span></span>
<span><span class="co">#</span></span>
<span><span class="co"># #%let anl_lst &lt;- %sysfunc(paste0("anl_", &amp;yvars, collapse = ", "))</span></span>
<span><span class="co">#</span></span>
<span><span class="co"># # Combine all analysis data frames</span></span>
<span><span class="co"># final &lt;- rbind(`&amp;anl_lst`)</span></span>
<span><span class="co">#</span></span>
<span><span class="co"># # Print Results</span></span>
<span><span class="co"># print(final)</span></span>
<span><span class="co">#</span></span>
<span><span class="co"># #%mend</span></span>
<span><span class="co">#</span></span>
<span><span class="co"># #% Call Macro</span></span>
<span><span class="co"># #%get_correlation(mtcars, mpg, c("cyl", "disp", "drat"))</span></span>
<span></span>
<span><span class="co"># Macro Execute Source Code</span></span>
<span><span class="fu">msource</span><span class="op">(</span><span class="va">src</span>, <span class="va">tmp</span><span class="op">)</span></span>
<span><span class="co">#  XVAR YVAR        COR</span></span>
<span><span class="co"># 1  mpg  cyl -0.8521620</span></span>
<span><span class="co"># 2  mpg disp -0.8475514</span></span>
<span><span class="co"># 3  mpg drat  0.6811719</span></span>
<span></span>
<span><span class="co"># View output file</span></span>
<span><span class="va">tcd</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readLines.html" class="external-link">readLines</a></span><span class="op">(</span><span class="va">tmp</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">tcd</span>, <span class="st">"\n"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#</span></span>
<span><span class="co"># # Perform Analysis ------------------------------------</span></span>
<span><span class="co">#</span></span>
<span><span class="co">#</span></span>
<span><span class="co"># # Correlation between mpg and cyl</span></span>
<span><span class="co"># anl_cyl &lt;- data.frame(XVAR = "mpg",</span></span>
<span><span class="co">#                       YVAR = "cyl",</span></span>
<span><span class="co">#                       COR = cor(mtcars$mpg, mtcars$cyl,</span></span>
<span><span class="co">#                                 method = "pearson"))</span></span>
<span><span class="co">#</span></span>
<span><span class="co"># # Correlation between mpg and disp</span></span>
<span><span class="co"># anl_disp &lt;- data.frame(XVAR = "mpg",</span></span>
<span><span class="co">#                        YVAR = "disp",</span></span>
<span><span class="co">#                        COR = cor(mtcars$mpg, mtcars$disp,</span></span>
<span><span class="co">#                                  method = "pearson"))</span></span>
<span><span class="co">#</span></span>
<span><span class="co"># # Correlation between mpg and drat</span></span>
<span><span class="co"># anl_drat &lt;- data.frame(XVAR = "mpg",</span></span>
<span><span class="co">#                        YVAR = "drat",</span></span>
<span><span class="co">#                        COR = cor(mtcars$mpg, mtcars$drat,</span></span>
<span><span class="co">#                                  method = "pearson"))</span></span>
<span><span class="co">#</span></span>
<span><span class="co">#</span></span>
<span><span class="co"># # Bind Results ----------------------------------------</span></span>
<span><span class="co">#</span></span>
<span><span class="co">#</span></span>
<span><span class="co"># # Combine all analysis data frames</span></span>
<span><span class="co"># final &lt;- rbind(anl_cyl, anl_disp, anl_drat)</span></span>
<span><span class="co">#</span></span>
<span><span class="co"># # Print Results</span></span>
<span><span class="co"># print(final)</span></span>
<span><span class="co">#</span></span></code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by David Bosak.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

      </footer></div>






  </body></html>

